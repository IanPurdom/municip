var interview_id = "<%= @interview.id %>";
var next_question_id = "<%= @next_question.id %>";
console.log(next_question_id)
var n = '<%= @answers.length %>';

var answer_0 = "<%= raw @answers[0] %>";
var answer_id_0 = "<%= raw @answer_ids[0] %>";
console.log("<%= raw @answers[0] %>")
console.log('<%= raw @answer_ids[0] %>')

var answer_1 = "<%= raw @answers[1] %>";
var answer_id_1 = "<%= raw @answer_ids[1] %>";
console.log("<%= raw @answers[1] %>")
console.log("<%= raw @answer_ids[1] %>")

var answer_2 = "<%= raw @answers[2] %>";
var answer_id_2 = "<%= raw @answer_ids[2] %>";

var answer_3 = "<%= raw @answers[3] %>";
var answer_id_3 = "<%= raw @answer_ids[3] %>";

var answer_4 = "<%= raw @answers[4] %>";
var answer_id_4 = "<%= raw @answer_ids[4] %>";

function clearProgram() {
  document.getElementById("user_program_program").value = "";
  // document.getElementById("user_program_program_id").value = "";
  document.querySelector(".button-answer").classList.remove("btn-red");
};

function nextQuestion() {
  var question = document.getElementById('question');
  question.innerText = "<%= raw @next_question.question %>";
  nextAnswers(question)
};

function nextAnswers(question) {
  document.querySelectorAll("answer").remove;
  for (let i = 0; i < n; i++) {
    if (eval(`answer_${i}`) != "") {
      let a = document.createElement("a");
      a.appendChild(document.createTextNode(eval(`answer_${i}`)));
      let answer_id = eval(`answer_id_${i}`)
      setAttributes(a, {"class": "answer", "data-remote": "true", "rel": "nofollow", "data-method": "patch", "href": `/interviews/${interview_id}/get_program?answer=${answer_id}&question=${next_question_id}`});
      let li = document.createElement("li");
      question.appendChild(li);
      li.appendChild(a)
    }else{
      console.log("We have a problem!")
    };
  };
};

function setAttributes(el, attrs) {
  for(var key in attrs) {
    el.setAttribute(key, attrs[key]);
  }
};

clearProgram();
nextQuestion();
